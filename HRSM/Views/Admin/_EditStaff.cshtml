@model HRSM.Models.Staff

<form asp-controller="Admin" asp-action="EditStaff" method="post" id="editStaffForm">
    <div asp-validation-summary="ModelOnly" class="alert alert-danger" data-valmsg-summary="true" style="display: none;"></div>

    <input type="hidden" asp-for="User_Id" />
    <input type="hidden" asp-for="MemberSince" />
    <input type="hidden" asp-for="Role" value="Staff" />
    <input type="hidden" asp-for="Password" />
    <input type="hidden" asp-for="ConfirmPassword" />

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="FirstName" class="form-label">First Name</label>
                <input asp-for="FirstName" class="form-control" />
                <span asp-validation-for="FirstName" class="text-danger"></span>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="LastName" class="form-label">Last Name</label>
                <input asp-for="LastName" class="form-control" />
                <span asp-validation-for="LastName" class="text-danger"></span>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="Email" class="form-label">Email</label>
                <input asp-for="Email" class="form-control" />
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="Contact" class="form-label">Contact Number</label>
                <input asp-for="Contact" class="form-control" placeholder="+639123456789 or 09123456789" />
                <span asp-validation-for="Contact" class="text-danger"></span>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="Department" class="form-label">Department</label>
                <select asp-for="Department" class="form-select">
                    <option value="">-- Select Department --</option>
                    <option value="Receptionist">Receptionist</option>
                    <option value="Housekeeping">Housekeeping</option>
                    <option value="Maintenance">Maintenance</option>
                </select>
                <span asp-validation-for="Department" class="text-danger"></span>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="HireDate" class="form-label">Hire Date</label>
                <input asp-for="HireDate" type="date" class="form-control" />
                <span asp-validation-for="HireDate" class="text-danger"></span>
            </div>
        </div>
    </div>

    <div class="form-actions">
        <button type="button" class="btn btn-secondary" onclick="closeModal('editStaffModal')">
            <i class="fas fa-times"></i> Cancel
        </button>
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i> Save Changes
        </button>
    </div>
</form>

<style>
    .form-group {
        margin-bottom: 1rem;
    }
    
    /* Reset validation styling initially */
    .field-validation-valid {
        display: none;
    }
    
    /* Style for the validation errors when they appear */
    .input-validation-error {
        border-color: red;
    }
</style>

<script>
    // Wait until the form interaction happens before showing validation errors
    $(document).ready(function() {
        // Remove any existing validation errors and classes
        $('.input-validation-error').removeClass('input-validation-error');
        $('.field-validation-error').empty();
        
        // Only validate on form submission or when user interacts with a field
        $('#editStaffForm').on('submit', function() {
            // Show validation summary if there are errors
            if (!$(this).valid()) {
                $('[data-valmsg-summary="true"]').show();
            }
        });
        
        // Only show field errors after user has interacted with them
        $('#editStaffForm input, #editStaffForm select').on('blur', function() {
            $(this).valid();
        });
    });
</script> 